<!DOCTYPE html>
<html lang="ko">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7377063602463955"
     crossorigin="anonymous"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7377063602463955"
     crossorigin="anonymous"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7377063602463955"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>크롬 공룡 게임 - 글래스모피즘 & 뉴모피즘</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #121212;
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, #5050ff22, transparent 30%),
                        radial-gradient(circle at 70% 70%, #5050ff22, transparent 30%);
            z-index: -1;
        }

        .game-container {
            width: 800px;
            height: 300px;
            position: relative;
            overflow: hidden;
            background: rgba(30, 30, 40, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.5),
                inset 0 1px 2px rgba(255, 255, 255, 0.1),
                inset 0 -1px 2px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .score-container {
            position: absolute;
            top: 20px;
            right: 30px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            z-index: 10;
        }
        
        .high-score, .current-score {
            font-size: 18px;
            font-weight: 600;
            color: #ffffff;
            text-shadow: 0 0 5px rgba(100, 100, 255, 0.5);
            font-family: monospace;
        }
        
        .high-score {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .health-container {
            margin-top: 10px;
            width: 100px;
            height: 10px;
        }
        
        .health-bar {
            width: 100%;
            height: 100%;
            background: rgba(30, 30, 40, 0.5);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .health-fill {
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, rgba(100, 255, 100, 0.8), rgba(150, 255, 150, 0.5));
            border-radius: 5px;
            transition: width 0.3s ease;
            box-shadow: 0 0 8px rgba(100, 255, 100, 0.5);
        }

        .game-over {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.7);
            z-index: 20;
            backdrop-filter: blur(5px);
            border-radius: 16px;
        }

        .game-over h2 {
            font-size: 32px;
            margin-bottom: 20px;
            text-shadow: 0 0 8px rgba(100, 100, 255, 0.8);
        }

        .restart-btn {
            padding: 12px 24px;
            background: rgba(80, 80, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 
                0 4px 10px rgba(0, 0, 0, 0.3),
                inset 0 1px 2px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 12px rgba(0, 0, 0, 0.4),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
            background: rgba(100, 100, 255, 0.4);
        }

        .restart-btn:active {
            transform: translateY(1px);
            box-shadow: 
                0 2px 5px rgba(0, 0, 0, 0.5),
                inset 0 1px 1px rgba(255, 255, 255, 0.1);
        }

        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 1px;
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 10px rgba(100, 100, 255, 0.5);
        }

        .dino {
            position: absolute;
            bottom: 0;
            left: 50px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 
                0 0 15px rgba(100, 100, 255, 0.6),
                inset 0 0 10px rgba(100, 100, 255, 0.3);
            transition: background 0.2s ease;
            overflow: hidden;
            z-index: 10;
        }

        .dino::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            width: 10px;
            height: 10px;
            background: rgba(30, 30, 40, 0.9);
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(100, 100, 255, 0.5);
        }

        .dino::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 60%;
            width: 20px;
            height: 1px;
            background: rgba(30, 30, 40, 0.9);
            box-shadow: 0 0 5px rgba(100, 100, 255, 0.5);
        }

        .cactus {
            position: absolute;
            bottom: 0;
            width: 20px;
            height: 50px;
            background: rgba(150, 255, 150, 0.5);
            border-radius: 5px;
            box-shadow: 
                0 0 15px rgba(100, 255, 100, 0.5),
                inset 0 0 10px rgba(100, 255, 100, 0.3);
        }

        .cactus::before {
            content: '';
            position: absolute;
            top: 15px;
            right: -10px;
            width: 15px;
            height: 10px;
            background: rgba(150, 255, 150, 0.5);
            border-radius: 5px;
            box-shadow: 0 0 8px rgba(100, 255, 100, 0.5);
        }

        .cactus::after {
            content: '';
            position: absolute;
            top: 30px;
            left: -10px;
            width: 15px;
            height: 10px;
            background: rgba(150, 255, 150, 0.5);
            border-radius: 5px;
            box-shadow: 0 0 8px rgba(100, 255, 100, 0.5);
        }

        .cloud {
            position: absolute;
            width: 70px;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            box-shadow: 
                0 0 15px rgba(100, 100, 255, 0.3),
                inset 0 0 10px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        .start-prompt {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: rgba(255, 255, 255, 0.7);
            text-shadow: 0 0 8px rgba(100, 100, 255, 0.5);
            text-align: center;
            z-index: 5;
        }

        .controls {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="score-container">
            <div class="high-score">HI: <span id="highScore">0</span></div>
            <div class="current-score"><span id="score">0</span></div>
            <div class="health-container">
                <div class="health-bar">
                    <div class="health-fill"></div>
                </div>
            </div>
        </div>
        <div class="start-prompt">
            스페이스바를 눌러 게임 시작<br>
            <div class="controls">Space: 점프 | P: 일시정지</div>
        </div>
        <div class="ground"></div>
        <div class="dino"></div>
        <div class="game-over">
            <h2>GAME OVER</h2>
            <button class="restart-btn">다시 시작</button>
        </div>
    </div>

    <script>
        // 게임 요소 선택
        const dino = document.querySelector('.dino');
        const gameContainer = document.querySelector('.game-container');
        const scoreDisplay = document.getElementById('score');
        const startPrompt = document.querySelector('.start-prompt');
        const gameOverScreen = document.querySelector('.game-over');
        const restartBtn = document.querySelector('.restart-btn');

        // 게임 변수 설정
        let isJumping = false;
        let isGameOver = false;
        let gameStarted = false;
        let isPaused = false;
        let score = 0;
        let highScore = 0; // localStorage 대신 메모리에 저장
        let health = 100; // 체력 추가
        let speedMultiplier = 1; // 속도 증가 배율
        let speed = 5;
        let scoreIncrement = 0.1; // 점수 증가량
        let cacti = [];
        let clouds = [];
        let animationFrameId;
        let lastTime = 0;
        let cactiInterval = 1500;
        let lastCactusTime = 0;
        let cloudInterval = 3000;
        let lastCloudTime = 0;
        let lastScoreIncrement = 0; // 마지막 점수 증가 시간
        let scoreIncrementInterval = 100; // 점수 증가 간격(ms)

        // 키보드 이벤트 감지
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                if (!gameStarted) {
                    startGame();
                } else if (!isJumping && !isGameOver && !isPaused) {
                    jump();
                } else if (isGameOver) {
                    restartGame();
                }
                e.preventDefault();
            }
            
            if (e.code === 'KeyP' && gameStarted && !isGameOver) {
                togglePause();
                e.preventDefault();
            }
        });

        // 터치 이벤트 감지
        gameContainer.addEventListener('touchstart', () => {
            if (!gameStarted) {
                startGame();
            } else if (!isJumping && !isGameOver && !isPaused) {
                jump();
            } else if (isGameOver) {
                restartGame();
            }
        });

        // 재시작 버튼 이벤트
        restartBtn.addEventListener('click', restartGame);

        // 점프 함수 - 크롬 브라우저 공룡 게임과 비슷한 느낌으로 수정
        function jump() {
            if (isJumping) return;
            
            isJumping = true;
            let jumpHeight = 120;
            let jumpTime = 0;
            let jumpDuration = 500; // 밀리초
            let gravity = 0.6;
            let jumpVelocity = 12;
            let velocity = jumpVelocity;
            
            function jumpAnimation() {
                // 중력 적용
                velocity -= gravity;
                
                // 현재 높이 계산
                let height = parseFloat(dino.style.bottom || '0') + velocity;
                
                // 바닥에 닿았는지 확인
                if (height <= 0) {
                    height = 0;
                    isJumping = false;
                    velocity = 0;
                }
                
                // 공룡 위치 업데이트
                dino.style.bottom = height + 'px';
                
                // 점프 중이면 애니메이션 계속
                if (isJumping) {
                    requestAnimationFrame(jumpAnimation);
                }
            }
            
            requestAnimationFrame(jumpAnimation);
        }

        // 랜덤 숫자 생성 함수
        function randomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // 선인장 생성 함수
        function createCactus() {
            const cactus = document.createElement('div');
            cactus.classList.add('cactus');
            cactus.style.left = gameContainer.clientWidth + 'px';
            
            // 선인장 변형
            const height = randomNumber(40, 70);
            cactus.style.height = height + 'px';
            
            // 난이도를 위한 다양한 크기와 간격
            if (score > 500) {
                // 더 큰 선인장 혹은 더 작은 선인장을 랜덤하게 생성
                const size = Math.random() > 0.7 ? randomNumber(60, 80) : randomNumber(30, 45);
                cactus.style.height = size + 'px';
                cactus.style.width = (size / 2.5) + 'px';
            }
            
            gameContainer.appendChild(cactus);
            cacti.push({
                element: cactus,
                position: gameContainer.clientWidth
            });
        }

        // 구름 생성 함수
        function createCloud() {
            const cloud = document.createElement('div');
            cloud.classList.add('cloud');
            
            const top = randomNumber(50, 150);
            cloud.style.top = top + 'px';
            cloud.style.left = gameContainer.clientWidth + 'px';
            
            // 구름 변형
            const width = randomNumber(60, 120);
            const height = width / 2;
            cloud.style.width = width + 'px';
            cloud.style.height = height + 'px';
            
            // 약간의 투명도 변화
            const opacity = Math.random() * 0.1 + 0.05;
            cloud.style.background = `rgba(255, 255, 255, ${opacity})`;
            
            gameContainer.appendChild(cloud);
            clouds.push({
                element: cloud,
                position: gameContainer.clientWidth,
                speed: randomNumber(1, 2) // 구름마다 다른 속도
            });
        }

        // 충돌 감지 함수
        function checkCollision(cactus) {
            const dinoRect = dino.getBoundingClientRect();
            const cactusRect = cactus.getBoundingClientRect();
            
            // 여백을 주어 충돌 감지 정확도 향상
            const buffer = 5;
            
            return !(
                dinoRect.right - buffer < cactusRect.left + buffer || 
                dinoRect.left + buffer > cactusRect.right - buffer || 
                dinoRect.bottom - buffer < cactusRect.top + buffer || 
                dinoRect.top + buffer > cactusRect.bottom - buffer
            );
        }

        // 게임 종료 함수
        function gameOver() {
            isGameOver = true;
            gameOverScreen.style.display = 'flex';
            cancelAnimationFrame(animationFrameId);
            
            // 게임 오버 시 효과
            dino.style.background = 'rgba(255, 100, 100, 0.9)';
            dino.style.boxShadow = '0 0 15px rgba(255, 100, 100, 0.8), inset 0 0 10px rgba(255, 100, 100, 0.5)';
        }

        // 게임 시작 함수
        function startGame() {
            gameStarted = true;
            startPrompt.style.display = 'none';
            score = 0;
            health = 100;
            speedMultiplier = 1;
            scoreIncrement = 0.1;
            
            // 최고 점수 표시
            document.getElementById('highScore').textContent = highScore;
            scoreDisplay.textContent = score;
            updateHealthBar();
            
            lastTime = 0;
            lastScoreIncrement = 0;
            
            gameLoop(0);
        }

        // 일시정지 기능
        function togglePause() {
            isPaused = !isPaused;
            
            if (!isPaused) {
                lastTime = 0;
                gameLoop(0);
            }
        }

        // 게임 재시작 함수
        function restartGame() {
            // 기존 장애물 제거
            cacti.forEach(cactusObj => {
                cactusObj.element.remove();
            });
            clouds.forEach(cloudObj => {
                cloudObj.element.remove();
            });
            
            // 변수 초기화
            cacti = [];
            clouds = [];
            score = 0;
            health = 100;
            speedMultiplier = 1;
            speed = 5;
            scoreIncrement = 0.1;
            isGameOver = false;
            isPaused = false;
            
            // UI 초기화
            dino.style.bottom = '0px';
            dino.style.opacity = '1';
            dino.style.background = 'rgba(255, 255, 255, 0.9)';
            dino.style.boxShadow = '0 0 15px rgba(100, 100, 255, 0.6), inset 0 0 10px rgba(100, 100, 255, 0.3)';
            gameOverScreen.style.display = 'none';
            scoreDisplay.textContent = score;
            updateHealthBar();
            
            // 최고 점수 표시
            document.getElementById('highScore').textContent = highScore;
            
            // 게임 루프 재시작
            lastTime = 0;
            lastScoreIncrement = 0;
            gameLoop(0);
        }

        // 메인 게임 루프
        function gameLoop(timestamp) {
            if (isPaused) return;
            
            if (!lastTime) {
                lastTime = timestamp;
            }
            const deltaTime = timestamp - lastTime;
            lastTime = timestamp;
            
            // 점수 업데이트 - 크롬 게임처럼 시간에 따라 일정하게 증가
            if (timestamp - lastScoreIncrement > scoreIncrementInterval) {
                score += scoreIncrement;
                lastScoreIncrement = timestamp;
                
                // 100점마다 속도 증가
                if (Math.floor(score) % 100 === 0 && Math.floor(score) > 0) {
                    speedMultiplier += 0.1;
                    // 체력 회복 (최대 100까지)
                    health = Math.min(100, health + 5);
                    updateHealthBar();
                }
            }
            
            // 정수로 표시
            scoreDisplay.textContent = Math.floor(score);
            
            // 최고 점수 업데이트
            if (score > highScore) {
                highScore = Math.floor(score);
                document.getElementById('highScore').textContent = highScore;
                // localStorage 제거
            }
            
            // 속도 업데이트 (점수에 따라 게임 난이도 증가)
            speed = 5 * speedMultiplier;
            
            // 점수가 높을수록 점수 증가 속도도 빨라짐
            scoreIncrement = 0.1 + (Math.floor(score) / 1000);
            
            // 선인장 생성 간격 조절
            if (timestamp - lastCactusTime > cactiInterval) {
                createCactus();
                lastCactusTime = timestamp;
                // 점수에 따라 선인장 생성 간격 감소 (난이도 증가)
                cactiInterval = Math.max(800, 1500 - Math.floor(score / 200) * 100);
            }
            
            // 구름 생성
            if (timestamp - lastCloudTime > cloudInterval) {
                createCloud();
                lastCloudTime = timestamp;
                cloudInterval = randomNumber(2000, 4000);
            }
            
            // 선인장 움직임 및 충돌 감지
            for (let i = 0; i < cacti.length; i++) {
                const cactusObj = cacti[i];
                cactusObj.position -= speed;
                cactusObj.element.style.left = cactusObj.position + 'px';
                
                // 화면 밖으로 나간 선인장 제거
                if (cactusObj.position < -50) {
                    cactusObj.element.remove();
                    cacti.splice(i, 1);
                    i--;
                } else if (!isGameOver && checkCollision(cactusObj.element)) {
                    // 체력 감소
                    health -= 25; // 충돌 시 체력 25% 감소
                    updateHealthBar();
                    
                    // 체력이 0이하면 게임 오버
                    if (health <= 0) {
                        gameOver();
                        return;
                    } else {
                        // 충돌 효과 표시 후 계속 진행
                        showCollisionEffect();
                        // 충돌한 선인장 제거
                        cactusObj.element.remove();
                        cacti.splice(i, 1);
                        i--;
                    }
                }
            }
            
            // 구름 움직임
            for (let i = 0; i < clouds.length; i++) {
                const cloudObj = clouds[i];
                cloudObj.position -= cloudObj.speed;
                cloudObj.element.style.left = cloudObj.position + 'px';
                
                // 화면 밖으로 나간 구름 제거
                if (cloudObj.position < -150) {
                    cloudObj.element.remove();
                    clouds.splice(i, 1);
                    i--;
                }
            }
            
            if (!isGameOver) {
                animationFrameId = requestAnimationFrame(gameLoop);
            }
        }
        
        // 체력바 업데이트 함수
        function updateHealthBar() {
            const healthFill = document.querySelector('.health-fill');
            healthFill.style.width = health + '%';
            
            // 체력에 따라 색상 변경
            if (health > 70) {
                healthFill.style.background = 'linear-gradient(90deg, rgba(100, 255, 100, 0.8), rgba(150, 255, 150, 0.5))';
            } else if (health > 30) {
                healthFill.style.background = 'linear-gradient(90deg, rgba(255, 255, 100, 0.8), rgba(255, 255, 150, 0.5))';
            } else {
                healthFill.style.background = 'linear-gradient(90deg, rgba(255, 100, 100, 0.8), rgba(255, 150, 150, 0.5))';
            }
        }
        
        // 충돌 효과 표시 함수
        function showCollisionEffect() {
            // 공룡 깜빡임 효과
            dino.style.opacity = '0.5';
            dino.style.background = 'rgba(255, 100, 100, 0.9)';
            dino.style.boxShadow = '0 0 15px rgba(255, 100, 100, 0.8), inset 0 0 10px rgba(255, 100, 100, 0.5)';
            
            // 0.3초 후 원래대로 복구
            setTimeout(() => {
                dino.style.opacity = '1';
                dino.style.background = 'rgba(255, 255, 255, 0.9)';
                dino.style.boxShadow = '0 0 15px rgba(100, 100, 255, 0.6), inset 0 0 10px rgba(100, 100, 255, 0.3)';
            }, 300);
        }

        // 반응형 조정
        window.addEventListener('resize', () => {
            // 게임 영역 크기 조정
            if (window.innerWidth < 820) {
                gameContainer.style.width = (window.innerWidth - 20) + 'px';
                if (window.innerWidth < 500) {
                    gameContainer.style.height = '200px';
                }
            } else {
                gameContainer.style.width = '800px';
                gameContainer.style.height = '300px';
            }
        });

        // 초기 반응형 설정
        if (window.innerWidth < 820) {
            gameContainer.style.width = (window.innerWidth - 20) + 'px';
            if (window.innerWidth < 500) {
                gameContainer.style.height = '200px';
            }
        }
    </script>
</body>
</html>
